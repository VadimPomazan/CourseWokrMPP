<div class="block_form">
  <%= form_with(model: @family_member, local: true) do |form| %>
    <% if family_member.errors.any? %>
      <div style="color: red">
        <h2><%= pluralize(family_member.errors.count, "error") %> prohibited this family_member from being saved:</h2>

        <ul>
          <% family_member.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field last-field">
      <%= form.label :family_member_name, style: "display: block" %>
      <%= form.text_field :family_member_name %>
    </div>

    <fieldset>
      <legend class="block_form__subtitle">Person Details</legend>

      <%= form.fields_for :person, family_member.build_person do |person_form| %>
        <div class="field">
          <%= person_form.label :first_name, style: "display: block" %>
          <%= person_form.text_field :first_name %>
        </div>
        <div class="field">
          <%= person_form.label :last_name, style: "display: block" %>
          <%= person_form.text_field :last_name %>
        </div>
        <div class="field">
          <%= person_form.label :patronym, style: "display: block" %>
          <%= person_form.text_field :patronym %>
        </div>
        <div class="field">
          <%= person_form.label :phone_number, style: "display: block" %>
          <%= person_form.text_field :phone_number %>
        </div>
        <div class="field">
          <%= person_form.label :address, style: "display: block" %>
          <%= person_form.text_field :address %>
        </div>
        <div class="field last-field">
          <%= person_form.label :date_of_birth, style: "display: block" %>
          <%= person_form.date_field :date_of_birth %>
        </div>
      <% end %>
    </fieldset>

    <div class="actions">
      <%= form.submit %>
    </div>
  <% end %>
</div>